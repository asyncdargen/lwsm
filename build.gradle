plugins {
    id 'java'
}

group = 'ru.dargen'
version = '1.0-SNAPSHOT'

repositories {
    mavenCentral()
}

dependencies {
    implementation 'org.ow2.asm:asm:9.1'
    implementation 'org.ow2.asm:asm-tree:9.1'

    compileOnly 'org.projectlombok:lombok:1.18.20'
    annotationProcessor 'org.projectlombok:lombok:1.18.20'
}

java {
    toolchain.languageVersion.set(JavaLanguageVersion.of(17))
}

jar {
    from configurations.runtimeClasspath.collect(project.&zipTree)
    duplicatesStrategy DuplicatesStrategy.EXCLUDE
    manifest {
        attributes 'Premain-Class': 'ru.dargen.lwsm.MixinBootstrap',
                'Can-Redefine-Classes': 'true',
                'Can-Retransform-Classes': 'true'
    }

    archiveFileName = "lwsm.jar"
}